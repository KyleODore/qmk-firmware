   1              		.cpu cortex-m0
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 4
   9              		.eabi_attribute 34, 0
  10              		.eabi_attribute 18, 2
  11              		.file	"report.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.text.has_anykey,"ax",%progbits
  16              		.align	1
  17              		.global	has_anykey
  18              		.arch armv6s-m
  19              		.syntax unified
  20              		.code	16
  21              		.thumb_func
  22              		.fpu softvfp
  24              	has_anykey:
  25              	.LVL0:
  26              	.LFB188:
  27              		.file 1 "tmk_core/common/report.c"
   1:tmk_core/common/report.c **** /* Copyright 2017 Fred Sundvik
   2:tmk_core/common/report.c ****  *
   3:tmk_core/common/report.c ****  * This program is free software: you can redistribute it and/or modify
   4:tmk_core/common/report.c ****  * it under the terms of the GNU General Public License as published by
   5:tmk_core/common/report.c ****  * the Free Software Foundation, either version 2 of the License, or
   6:tmk_core/common/report.c ****  * (at your option) any later version.
   7:tmk_core/common/report.c ****  *
   8:tmk_core/common/report.c ****  * This program is distributed in the hope that it will be useful,
   9:tmk_core/common/report.c ****  * but WITHOUT ANY WARRANTY; without even the implied warranty of
  10:tmk_core/common/report.c ****  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  11:tmk_core/common/report.c ****  * GNU General Public License for more details.
  12:tmk_core/common/report.c ****  *
  13:tmk_core/common/report.c ****  * You should have received a copy of the GNU General Public License
  14:tmk_core/common/report.c ****  * along with this program.  If not, see <http://www.gnu.org/licenses/>.
  15:tmk_core/common/report.c ****  */
  16:tmk_core/common/report.c **** 
  17:tmk_core/common/report.c **** #include "report.h"
  18:tmk_core/common/report.c **** #include "host.h"
  19:tmk_core/common/report.c **** #include "keycode_config.h"
  20:tmk_core/common/report.c **** #include "debug.h"
  21:tmk_core/common/report.c **** #include "util.h"
  22:tmk_core/common/report.c **** #include <string.h>
  23:tmk_core/common/report.c **** 
  24:tmk_core/common/report.c **** /** \brief has_anykey
  25:tmk_core/common/report.c ****  *
  26:tmk_core/common/report.c ****  * FIXME: Needs doc
  27:tmk_core/common/report.c ****  */
  28:tmk_core/common/report.c **** uint8_t has_anykey(report_keyboard_t* keyboard_report) {
  28              		.loc 1 28 56 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		@ link register save eliminated.
  29:tmk_core/common/report.c ****     uint8_t  cnt = 0;
  33              		.loc 1 29 5 view .LVU1
  30:tmk_core/common/report.c ****     uint8_t* p   = keyboard_report->keys;
  34              		.loc 1 30 5 view .LVU2
  31:tmk_core/common/report.c ****     uint8_t  lp  = sizeof(keyboard_report->keys);
  35              		.loc 1 31 5 view .LVU3
  32:tmk_core/common/report.c **** #ifdef NKRO_ENABLE
  33:tmk_core/common/report.c ****     if (keyboard_protocol && keymap_config.nkro) {
  36              		.loc 1 33 5 view .LVU4
  37              		.loc 1 33 9 is_stmt 0 view .LVU5
  38 0000 0B4B     		ldr	r3, .L12
  39              		.loc 1 33 8 view .LVU6
  40 0002 1A78     		ldrb	r2, [r3]
  31:tmk_core/common/report.c ****     uint8_t  lp  = sizeof(keyboard_report->keys);
  41              		.loc 1 31 14 view .LVU7
  42 0004 0623     		movs	r3, #6
  43              		.loc 1 33 8 view .LVU8
  44 0006 002A     		cmp	r2, #0
  45 0008 04D0     		beq	.L2
  46              		.loc 1 33 27 discriminator 1 view .LVU9
  47 000a 0A4A     		ldr	r2, .L12+4
  48 000c 1278     		ldrb	r2, [r2]
  49 000e 7F2A     		cmp	r2, #127
  50 0010 00D9     		bls	.L2
  34:tmk_core/common/report.c ****         p  = keyboard_report->nkro.bits;
  35:tmk_core/common/report.c ****         lp = sizeof(keyboard_report->nkro.bits);
  51              		.loc 1 35 12 view .LVU10
  52 0012 1833     		adds	r3, r3, #24
  53              	.L2:
  54 0014 821C     		adds	r2, r0, #2
  55 0016 0020     		movs	r0, #0
  56              	.LVL1:
  57              	.L3:
  36:tmk_core/common/report.c ****     }
  37:tmk_core/common/report.c **** #endif
  38:tmk_core/common/report.c ****     while (lp--) {
  58              		.loc 1 38 14 view .LVU11
  59 0018 013B     		subs	r3, r3, #1
  60              	.LVL2:
  61              		.loc 1 38 14 view .LVU12
  62 001a DBB2     		uxtb	r3, r3
  63              	.LVL3:
  64              		.loc 1 38 11 view .LVU13
  65 001c FF2B     		cmp	r3, #255
  66 001e 00D1     		bne	.L5
  39:tmk_core/common/report.c ****         if (*p++) cnt++;
  40:tmk_core/common/report.c ****     }
  41:tmk_core/common/report.c ****     return cnt;
  42:tmk_core/common/report.c **** }
  67              		.loc 1 42 1 view .LVU14
  68              		@ sp needed
  69 0020 7047     		bx	lr
  70              	.L5:
  39:tmk_core/common/report.c ****         if (*p++) cnt++;
  71              		.loc 1 39 9 is_stmt 1 view .LVU15
  72              	.LVL4:
  39:tmk_core/common/report.c ****         if (*p++) cnt++;
  73              		.loc 1 39 12 is_stmt 0 view .LVU16
  74 0022 1178     		ldrb	r1, [r2]
  75 0024 0029     		cmp	r1, #0
  76 0026 01D0     		beq	.L4
  39:tmk_core/common/report.c ****         if (*p++) cnt++;
  77              		.loc 1 39 19 is_stmt 1 discriminator 1 view .LVU17
  39:tmk_core/common/report.c ****         if (*p++) cnt++;
  78              		.loc 1 39 22 is_stmt 0 discriminator 1 view .LVU18
  79 0028 0130     		adds	r0, r0, #1
  80              	.LVL5:
  39:tmk_core/common/report.c ****         if (*p++) cnt++;
  81              		.loc 1 39 22 discriminator 1 view .LVU19
  82 002a C0B2     		uxtb	r0, r0
  83              	.LVL6:
  84              	.L4:
  39:tmk_core/common/report.c ****         if (*p++) cnt++;
  85              		.loc 1 39 22 discriminator 1 view .LVU20
  86 002c 0132     		adds	r2, r2, #1
  87              	.LVL7:
  39:tmk_core/common/report.c ****         if (*p++) cnt++;
  88              		.loc 1 39 22 discriminator 1 view .LVU21
  89 002e F3E7     		b	.L3
  90              	.L13:
  91              		.align	2
  92              	.L12:
  93 0030 00000000 		.word	keyboard_protocol
  94 0034 00000000 		.word	keymap_config
  95              		.cfi_endproc
  96              	.LFE188:
  98              		.section	.text.get_first_key,"ax",%progbits
  99              		.align	1
 100              		.global	get_first_key
 101              		.syntax unified
 102              		.code	16
 103              		.thumb_func
 104              		.fpu softvfp
 106              	get_first_key:
 107              	.LVL8:
 108              	.LFB189:
  43:tmk_core/common/report.c **** 
  44:tmk_core/common/report.c **** /** \brief get_first_key
  45:tmk_core/common/report.c ****  *
  46:tmk_core/common/report.c ****  * FIXME: Needs doc
  47:tmk_core/common/report.c ****  */
  48:tmk_core/common/report.c **** uint8_t get_first_key(report_keyboard_t* keyboard_report) {
 109              		.loc 1 48 59 is_stmt 1 view -0
 110              		.cfi_startproc
 111              		@ args = 0, pretend = 0, frame = 0
 112              		@ frame_needed = 0, uses_anonymous_args = 0
  49:tmk_core/common/report.c **** #ifdef NKRO_ENABLE
  50:tmk_core/common/report.c ****     if (keyboard_protocol && keymap_config.nkro) {
 113              		.loc 1 50 5 view .LVU23
  48:tmk_core/common/report.c **** #ifdef NKRO_ENABLE
 114              		.loc 1 48 59 is_stmt 0 view .LVU24
 115 0000 10B5     		push	{r4, lr}
 116              		.cfi_def_cfa_offset 8
 117              		.cfi_offset 4, -8
 118              		.cfi_offset 14, -4
 119              		.loc 1 50 9 view .LVU25
 120 0002 0E4B     		ldr	r3, .L25
 121              		.loc 1 50 8 view .LVU26
 122 0004 1B78     		ldrb	r3, [r3]
 123 0006 002B     		cmp	r3, #0
 124 0008 16D0     		beq	.L15
 125              		.loc 1 50 27 discriminator 1 view .LVU27
 126 000a 0D4B     		ldr	r3, .L25+4
 127 000c 1B78     		ldrb	r3, [r3]
 128 000e 7F2B     		cmp	r3, #127
 129 0010 12D9     		bls	.L15
 130 0012 0023     		movs	r3, #0
 131              	.LBB2:
  51:tmk_core/common/report.c ****         uint8_t i = 0;
  52:tmk_core/common/report.c ****         for (; i < KEYBOARD_REPORT_BITS && !keyboard_report->nkro.bits[i]; i++)
 132              		.loc 1 52 71 view .LVU28
 133 0014 811C     		adds	r1, r0, #2
 134              	.L16:
 135              		.loc 1 52 41 discriminator 2 view .LVU29
 136 0016 CA5C     		ldrb	r2, [r1, r3]
 137 0018 DCB2     		uxtb	r4, r3
 138              	.LVL9:
 139              		.loc 1 52 41 discriminator 2 view .LVU30
 140 001a 002A     		cmp	r2, #0
 141 001c 07D0     		beq	.L18
 142              	.LVL10:
 143              	.L17:
  53:tmk_core/common/report.c ****             ;
  54:tmk_core/common/report.c ****         return i << 3 | biton(keyboard_report->nkro.bits[i]);
 144              		.loc 1 54 9 is_stmt 1 view .LVU31
 145              		.loc 1 54 25 is_stmt 0 view .LVU32
 146 001e 0019     		adds	r0, r0, r4
 147              	.LVL11:
 148              		.loc 1 54 25 view .LVU33
 149 0020 8078     		ldrb	r0, [r0, #2]
 150 0022 FFF7FEFF 		bl	biton
 151              	.LVL12:
 152              		.loc 1 54 18 view .LVU34
 153 0026 E400     		lsls	r4, r4, #3
 154              		.loc 1 54 23 view .LVU35
 155 0028 2043     		orrs	r0, r4
 156 002a C0B2     		uxtb	r0, r0
 157              	.L19:
 158              		.loc 1 54 23 view .LVU36
 159              	.LBE2:
  55:tmk_core/common/report.c ****     }
  56:tmk_core/common/report.c **** #endif
  57:tmk_core/common/report.c **** #ifdef USB_6KRO_ENABLE
  58:tmk_core/common/report.c ****     uint8_t i = cb_head;
  59:tmk_core/common/report.c ****     do {
  60:tmk_core/common/report.c ****         if (keyboard_report->keys[i] != 0) {
  61:tmk_core/common/report.c ****             break;
  62:tmk_core/common/report.c ****         }
  63:tmk_core/common/report.c ****         i = RO_INC(i);
  64:tmk_core/common/report.c ****     } while (i != cb_tail);
  65:tmk_core/common/report.c ****     return keyboard_report->keys[i];
  66:tmk_core/common/report.c **** #else
  67:tmk_core/common/report.c ****     return keyboard_report->keys[0];
  68:tmk_core/common/report.c **** #endif
  69:tmk_core/common/report.c **** }
 160              		.loc 1 69 1 view .LVU37
 161              		@ sp needed
 162 002c 10BD     		pop	{r4, pc}
 163              	.LVL13:
 164              	.L18:
 165              	.LBB3:
  53:tmk_core/common/report.c ****             ;
 166              		.loc 1 53 13 is_stmt 1 discriminator 3 view .LVU38
  53:tmk_core/common/report.c ****             ;
 167              		.loc 1 53 13 is_stmt 0 discriminator 3 view .LVU39
 168 002e 0133     		adds	r3, r3, #1
 169              	.LVL14:
  52:tmk_core/common/report.c ****             ;
 170              		.loc 1 52 9 discriminator 3 view .LVU40
 171 0030 1E2B     		cmp	r3, #30
 172 0032 F0D1     		bne	.L16
 173 0034 1C00     		movs	r4, r3
 174              	.LVL15:
  52:tmk_core/common/report.c ****             ;
 175              		.loc 1 52 9 discriminator 3 view .LVU41
 176 0036 F2E7     		b	.L17
 177              	.L15:
  52:tmk_core/common/report.c ****             ;
 178              		.loc 1 52 9 discriminator 3 view .LVU42
 179              	.LBE3:
  67:tmk_core/common/report.c **** #endif
 180              		.loc 1 67 5 is_stmt 1 view .LVU43
  67:tmk_core/common/report.c **** #endif
 181              		.loc 1 67 33 is_stmt 0 view .LVU44
 182 0038 8078     		ldrb	r0, [r0, #2]
 183              	.LVL16:
  67:tmk_core/common/report.c **** #endif
 184              		.loc 1 67 33 view .LVU45
 185 003a F7E7     		b	.L19
 186              	.L26:
 187              		.align	2
 188              	.L25:
 189 003c 00000000 		.word	keyboard_protocol
 190 0040 00000000 		.word	keymap_config
 191              		.cfi_endproc
 192              	.LFE189:
 194              		.section	.text.is_key_pressed,"ax",%progbits
 195              		.align	1
 196              		.global	is_key_pressed
 197              		.syntax unified
 198              		.code	16
 199              		.thumb_func
 200              		.fpu softvfp
 202              	is_key_pressed:
 203              	.LVL17:
 204              	.LFB190:
  70:tmk_core/common/report.c **** 
  71:tmk_core/common/report.c **** /** \brief Checks if a key is pressed in the report
  72:tmk_core/common/report.c ****  *
  73:tmk_core/common/report.c ****  * Returns true if the keyboard_report reports that the key is pressed, otherwise false
  74:tmk_core/common/report.c ****  * Note: The function doesn't support modifers currently, and it returns false for KC_NO
  75:tmk_core/common/report.c ****  */
  76:tmk_core/common/report.c **** bool is_key_pressed(report_keyboard_t* keyboard_report, uint8_t key) {
 205              		.loc 1 76 70 is_stmt 1 view -0
 206              		.cfi_startproc
 207              		@ args = 0, pretend = 0, frame = 0
 208              		@ frame_needed = 0, uses_anonymous_args = 0
 209              		@ link register save eliminated.
  77:tmk_core/common/report.c ****     if (key == KC_NO) {
 210              		.loc 1 77 5 view .LVU47
  78:tmk_core/common/report.c ****         return false;
 211              		.loc 1 78 16 is_stmt 0 view .LVU48
 212 0000 0B1E     		subs	r3, r1, #0
  77:tmk_core/common/report.c ****     if (key == KC_NO) {
 213              		.loc 1 77 8 view .LVU49
 214 0002 16D0     		beq	.L28
  79:tmk_core/common/report.c ****     }
  80:tmk_core/common/report.c **** #ifdef NKRO_ENABLE
  81:tmk_core/common/report.c ****     if (keyboard_protocol && keymap_config.nkro) {
 215              		.loc 1 81 5 is_stmt 1 view .LVU50
 216              		.loc 1 81 9 is_stmt 0 view .LVU51
 217 0004 124B     		ldr	r3, .L38
 218              		.loc 1 81 8 view .LVU52
 219 0006 1B78     		ldrb	r3, [r3]
 220 0008 002B     		cmp	r3, #0
 221 000a 14D0     		beq	.L29
 222              		.loc 1 81 27 discriminator 1 view .LVU53
 223 000c 114B     		ldr	r3, .L38+4
 224 000e 1B78     		ldrb	r3, [r3]
 225 0010 7F2B     		cmp	r3, #127
 226 0012 10D9     		bls	.L29
  82:tmk_core/common/report.c ****         if ((key >> 3) < KEYBOARD_REPORT_BITS) {
 227              		.loc 1 82 9 is_stmt 1 view .LVU54
 228              		.loc 1 82 24 is_stmt 0 view .LVU55
 229 0014 CA08     		lsrs	r2, r1, #3
  78:tmk_core/common/report.c ****         return false;
 230              		.loc 1 78 16 view .LVU56
 231 0016 0023     		movs	r3, #0
 232              		.loc 1 82 12 view .LVU57
 233 0018 1D2A     		cmp	r2, #29
 234 001a 0AD8     		bhi	.L28
  83:tmk_core/common/report.c ****             return keyboard_report->nkro.bits[key >> 3] & 1 << (key & 7);
 235              		.loc 1 83 13 is_stmt 1 view .LVU58
 236              		.loc 1 83 69 is_stmt 0 view .LVU59
 237 001c 0733     		adds	r3, r3, #7
 238 001e 1940     		ands	r1, r3
 239              	.LVL18:
 240              		.loc 1 83 61 view .LVU60
 241 0020 063B     		subs	r3, r3, #6
 242 0022 8B40     		lsls	r3, r3, r1
 243 0024 1900     		movs	r1, r3
 244              		.loc 1 83 46 view .LVU61
 245 0026 8018     		adds	r0, r0, r2
 246              	.LVL19:
 247              		.loc 1 83 46 view .LVU62
 248 0028 8378     		ldrb	r3, [r0, #2]
 249              		.loc 1 83 57 view .LVU63
 250 002a 0B40     		ands	r3, r1
 251 002c 581E     		subs	r0, r3, #1
 252 002e 8341     		sbcs	r3, r3, r0
 253 0030 DBB2     		uxtb	r3, r3
 254              	.L28:
  84:tmk_core/common/report.c ****         } else {
  85:tmk_core/common/report.c ****             return false;
  86:tmk_core/common/report.c ****         }
  87:tmk_core/common/report.c ****     }
  88:tmk_core/common/report.c **** #endif
  89:tmk_core/common/report.c ****     for (int i = 0; i < KEYBOARD_REPORT_KEYS; i++) {
  90:tmk_core/common/report.c ****         if (keyboard_report->keys[i] == key) {
  91:tmk_core/common/report.c ****             return true;
  92:tmk_core/common/report.c ****         }
  93:tmk_core/common/report.c ****     }
  94:tmk_core/common/report.c ****     return false;
  95:tmk_core/common/report.c **** }
 255              		.loc 1 95 1 view .LVU64
 256 0032 1800     		movs	r0, r3
 257              		@ sp needed
 258 0034 7047     		bx	lr
 259              	.LVL20:
 260              	.L29:
 261              		.loc 1 95 1 view .LVU65
 262 0036 831C     		adds	r3, r0, #2
 263 0038 0830     		adds	r0, r0, #8
 264              	.LVL21:
 265              	.L30:
 266              	.LBB4:
  90:tmk_core/common/report.c ****             return true;
 267              		.loc 1 90 9 is_stmt 1 view .LVU66
  90:tmk_core/common/report.c ****             return true;
 268              		.loc 1 90 12 is_stmt 0 view .LVU67
 269 003a 1A78     		ldrb	r2, [r3]
 270 003c 8A42     		cmp	r2, r1
 271 003e 04D0     		beq	.L33
 272              	.LVL22:
  90:tmk_core/common/report.c ****             return true;
 273              		.loc 1 90 12 view .LVU68
 274 0040 0133     		adds	r3, r3, #1
 275              	.LVL23:
  89:tmk_core/common/report.c ****         if (keyboard_report->keys[i] == key) {
 276              		.loc 1 89 5 discriminator 2 view .LVU69
 277 0042 8342     		cmp	r3, r0
 278 0044 F9D1     		bne	.L30
 279              	.LBE4:
  78:tmk_core/common/report.c ****     }
 280              		.loc 1 78 16 view .LVU70
 281 0046 0023     		movs	r3, #0
 282              	.LVL24:
 283              	.LBB5:
  78:tmk_core/common/report.c ****     }
 284              		.loc 1 78 16 view .LVU71
 285 0048 F3E7     		b	.L28
 286              	.LVL25:
 287              	.L33:
  91:tmk_core/common/report.c ****         }
 288              		.loc 1 91 20 view .LVU72
 289 004a 0123     		movs	r3, #1
 290              	.LVL26:
  91:tmk_core/common/report.c ****         }
 291              		.loc 1 91 20 view .LVU73
 292 004c F1E7     		b	.L28
 293              	.L39:
 294 004e C046     		.align	2
 295              	.L38:
 296 0050 00000000 		.word	keyboard_protocol
 297 0054 00000000 		.word	keymap_config
 298              	.LBE5:
 299              		.cfi_endproc
 300              	.LFE190:
 302              		.section	.text.add_key_byte,"ax",%progbits
 303              		.align	1
 304              		.global	add_key_byte
 305              		.syntax unified
 306              		.code	16
 307              		.thumb_func
 308              		.fpu softvfp
 310              	add_key_byte:
 311              	.LVL27:
 312              	.LFB191:
  96:tmk_core/common/report.c **** 
  97:tmk_core/common/report.c **** /** \brief add key byte
  98:tmk_core/common/report.c ****  *
  99:tmk_core/common/report.c ****  * FIXME: Needs doc
 100:tmk_core/common/report.c ****  */
 101:tmk_core/common/report.c **** void add_key_byte(report_keyboard_t* keyboard_report, uint8_t code) {
 313              		.loc 1 101 69 is_stmt 1 view -0
 314              		.cfi_startproc
 315              		@ args = 0, pretend = 0, frame = 0
 316              		@ frame_needed = 0, uses_anonymous_args = 0
 102:tmk_core/common/report.c **** #ifdef USB_6KRO_ENABLE
 103:tmk_core/common/report.c ****     int8_t i     = cb_head;
 104:tmk_core/common/report.c ****     int8_t empty = -1;
 105:tmk_core/common/report.c ****     if (cb_count) {
 106:tmk_core/common/report.c ****         do {
 107:tmk_core/common/report.c ****             if (keyboard_report->keys[i] == code) {
 108:tmk_core/common/report.c ****                 return;
 109:tmk_core/common/report.c ****             }
 110:tmk_core/common/report.c ****             if (empty == -1 && keyboard_report->keys[i] == 0) {
 111:tmk_core/common/report.c ****                 empty = i;
 112:tmk_core/common/report.c ****             }
 113:tmk_core/common/report.c ****             i = RO_INC(i);
 114:tmk_core/common/report.c ****         } while (i != cb_tail);
 115:tmk_core/common/report.c ****         if (i == cb_tail) {
 116:tmk_core/common/report.c ****             if (cb_tail == cb_head) {
 117:tmk_core/common/report.c ****                 // buffer is full
 118:tmk_core/common/report.c ****                 if (empty == -1) {
 119:tmk_core/common/report.c ****                     // pop head when has no empty space
 120:tmk_core/common/report.c ****                     cb_head = RO_INC(cb_head);
 121:tmk_core/common/report.c ****                     cb_count--;
 122:tmk_core/common/report.c ****                 } else {
 123:tmk_core/common/report.c ****                     // left shift when has empty space
 124:tmk_core/common/report.c ****                     uint8_t offset = 1;
 125:tmk_core/common/report.c ****                     i              = RO_INC(empty);
 126:tmk_core/common/report.c ****                     do {
 127:tmk_core/common/report.c ****                         if (keyboard_report->keys[i] != 0) {
 128:tmk_core/common/report.c ****                             keyboard_report->keys[empty] = keyboard_report->keys[i];
 129:tmk_core/common/report.c ****                             keyboard_report->keys[i]     = 0;
 130:tmk_core/common/report.c ****                             empty                        = RO_INC(empty);
 131:tmk_core/common/report.c ****                         } else {
 132:tmk_core/common/report.c ****                             offset++;
 133:tmk_core/common/report.c ****                         }
 134:tmk_core/common/report.c ****                         i = RO_INC(i);
 135:tmk_core/common/report.c ****                     } while (i != cb_tail);
 136:tmk_core/common/report.c ****                     cb_tail = RO_SUB(cb_tail, offset);
 137:tmk_core/common/report.c ****                 }
 138:tmk_core/common/report.c ****             }
 139:tmk_core/common/report.c ****         }
 140:tmk_core/common/report.c ****     }
 141:tmk_core/common/report.c ****     // add to tail
 142:tmk_core/common/report.c ****     keyboard_report->keys[cb_tail] = code;
 143:tmk_core/common/report.c ****     cb_tail                        = RO_INC(cb_tail);
 144:tmk_core/common/report.c ****     cb_count++;
 145:tmk_core/common/report.c **** #else
 146:tmk_core/common/report.c ****     int8_t i     = 0;
 317              		.loc 1 146 5 view .LVU75
 147:tmk_core/common/report.c ****     int8_t empty = -1;
 318              		.loc 1 147 5 view .LVU76
 148:tmk_core/common/report.c ****     for (; i < KEYBOARD_REPORT_KEYS; i++) {
 319              		.loc 1 148 5 view .LVU77
 147:tmk_core/common/report.c ****     int8_t empty = -1;
 320              		.loc 1 147 12 is_stmt 0 view .LVU78
 321 0000 0122     		movs	r2, #1
 101:tmk_core/common/report.c **** #ifdef USB_6KRO_ENABLE
 322              		.loc 1 101 69 view .LVU79
 323 0002 0023     		movs	r3, #0
 324 0004 F0B5     		push	{r4, r5, r6, r7, lr}
 325              		.cfi_def_cfa_offset 20
 326              		.cfi_offset 4, -20
 327              		.cfi_offset 5, -16
 328              		.cfi_offset 6, -12
 329              		.cfi_offset 7, -8
 330              		.cfi_offset 14, -4
 147:tmk_core/common/report.c ****     int8_t empty = -1;
 331              		.loc 1 147 12 view .LVU80
 332 0006 5242     		rsbs	r2, r2, #0
 149:tmk_core/common/report.c ****         if (keyboard_report->keys[i] == code) {
 333              		.loc 1 149 34 view .LVU81
 334 0008 851C     		adds	r5, r0, #2
 335              	.LVL28:
 336              	.L43:
 337              		.loc 1 149 34 view .LVU82
 338 000a EC5C     		ldrb	r4, [r5, r3]
 339 000c 5EB2     		sxtb	r6, r3
 340              	.LVL29:
 341              		.loc 1 149 9 is_stmt 1 view .LVU83
 342              		.loc 1 149 12 is_stmt 0 view .LVU84
 343 000e 8C42     		cmp	r4, r1
 344 0010 0BD0     		beq	.L40
 150:tmk_core/common/report.c ****             break;
 151:tmk_core/common/report.c ****         }
 152:tmk_core/common/report.c ****         if (empty == -1 && keyboard_report->keys[i] == 0) {
 345              		.loc 1 152 9 is_stmt 1 view .LVU85
 346              		.loc 1 152 12 is_stmt 0 view .LVU86
 347 0012 571C     		adds	r7, r2, #1
 348 0014 02D1     		bne	.L42
 349              		.loc 1 152 25 discriminator 1 view .LVU87
 350 0016 002C     		cmp	r4, #0
 351 0018 00D1     		bne	.L42
 352              		.loc 1 152 25 view .LVU88
 353 001a 3200     		movs	r2, r6
 354              	.LVL30:
 355              	.L42:
 356              		.loc 1 152 25 view .LVU89
 357 001c 0133     		adds	r3, r3, #1
 358              	.LVL31:
 148:tmk_core/common/report.c ****         if (keyboard_report->keys[i] == code) {
 359              		.loc 1 148 5 view .LVU90
 360 001e 062B     		cmp	r3, #6
 361 0020 F3D1     		bne	.L43
 153:tmk_core/common/report.c ****             empty = i;
 154:tmk_core/common/report.c ****         }
 155:tmk_core/common/report.c ****     }
 156:tmk_core/common/report.c ****     if (i == KEYBOARD_REPORT_KEYS) {
 362              		.loc 1 156 5 is_stmt 1 view .LVU91
 157:tmk_core/common/report.c ****         if (empty != -1) {
 363              		.loc 1 157 9 view .LVU92
 364              		.loc 1 157 12 is_stmt 0 view .LVU93
 365 0022 531C     		adds	r3, r2, #1
 366 0024 01D0     		beq	.L40
 158:tmk_core/common/report.c ****             keyboard_report->keys[empty] = code;
 367              		.loc 1 158 13 is_stmt 1 view .LVU94
 368              		.loc 1 158 42 is_stmt 0 view .LVU95
 369 0026 8018     		adds	r0, r0, r2
 370              	.LVL32:
 371              		.loc 1 158 42 view .LVU96
 372 0028 8170     		strb	r1, [r0, #2]
 373              	.LVL33:
 374              	.L40:
 159:tmk_core/common/report.c ****         }
 160:tmk_core/common/report.c ****     }
 161:tmk_core/common/report.c **** #endif
 162:tmk_core/common/report.c **** }
 375              		.loc 1 162 1 view .LVU97
 376              		@ sp needed
 377              	.LVL34:
 378              		.loc 1 162 1 view .LVU98
 379 002a F0BD     		pop	{r4, r5, r6, r7, pc}
 380              		.cfi_endproc
 381              	.LFE191:
 383              		.section	.text.del_key_byte,"ax",%progbits
 384              		.align	1
 385              		.global	del_key_byte
 386              		.syntax unified
 387              		.code	16
 388              		.thumb_func
 389              		.fpu softvfp
 391              	del_key_byte:
 392              	.LVL35:
 393              	.LFB192:
 163:tmk_core/common/report.c **** 
 164:tmk_core/common/report.c **** /** \brief del key byte
 165:tmk_core/common/report.c ****  *
 166:tmk_core/common/report.c ****  * FIXME: Needs doc
 167:tmk_core/common/report.c ****  */
 168:tmk_core/common/report.c **** void del_key_byte(report_keyboard_t* keyboard_report, uint8_t code) {
 394              		.loc 1 168 69 is_stmt 1 view -0
 395              		.cfi_startproc
 396              		@ args = 0, pretend = 0, frame = 0
 397              		@ frame_needed = 0, uses_anonymous_args = 0
 169:tmk_core/common/report.c **** #ifdef USB_6KRO_ENABLE
 170:tmk_core/common/report.c ****     uint8_t i = cb_head;
 171:tmk_core/common/report.c ****     if (cb_count) {
 172:tmk_core/common/report.c ****         do {
 173:tmk_core/common/report.c ****             if (keyboard_report->keys[i] == code) {
 174:tmk_core/common/report.c ****                 keyboard_report->keys[i] = 0;
 175:tmk_core/common/report.c ****                 cb_count--;
 176:tmk_core/common/report.c ****                 if (cb_count == 0) {
 177:tmk_core/common/report.c ****                     // reset head and tail
 178:tmk_core/common/report.c ****                     cb_tail = cb_head = 0;
 179:tmk_core/common/report.c ****                 }
 180:tmk_core/common/report.c ****                 if (i == RO_DEC(cb_tail)) {
 181:tmk_core/common/report.c ****                     // left shift when next to tail
 182:tmk_core/common/report.c ****                     do {
 183:tmk_core/common/report.c ****                         cb_tail = RO_DEC(cb_tail);
 184:tmk_core/common/report.c ****                         if (keyboard_report->keys[RO_DEC(cb_tail)] != 0) {
 185:tmk_core/common/report.c ****                             break;
 186:tmk_core/common/report.c ****                         }
 187:tmk_core/common/report.c ****                     } while (cb_tail != cb_head);
 188:tmk_core/common/report.c ****                 }
 189:tmk_core/common/report.c ****                 break;
 190:tmk_core/common/report.c ****             }
 191:tmk_core/common/report.c ****             i = RO_INC(i);
 192:tmk_core/common/report.c ****         } while (i != cb_tail);
 193:tmk_core/common/report.c ****     }
 194:tmk_core/common/report.c **** #else
 195:tmk_core/common/report.c ****     for (uint8_t i = 0; i < KEYBOARD_REPORT_KEYS; i++) {
 398              		.loc 1 195 5 view .LVU100
 399              	.LBB6:
 400              		.loc 1 195 10 view .LVU101
 196:tmk_core/common/report.c ****         if (keyboard_report->keys[i] == code) {
 197:tmk_core/common/report.c ****             keyboard_report->keys[i] = 0;
 401              		.loc 1 197 38 is_stmt 0 view .LVU102
 402 0000 0022     		movs	r2, #0
 403              	.LBE6:
 168:tmk_core/common/report.c **** #ifdef USB_6KRO_ENABLE
 404              		.loc 1 168 69 view .LVU103
 405 0002 10B5     		push	{r4, lr}
 406              		.cfi_def_cfa_offset 8
 407              		.cfi_offset 4, -8
 408              		.cfi_offset 14, -4
 409 0004 831C     		adds	r3, r0, #2
 410 0006 0830     		adds	r0, r0, #8
 411              	.LVL36:
 412              	.L50:
 413              	.LBB7:
 196:tmk_core/common/report.c ****         if (keyboard_report->keys[i] == code) {
 414              		.loc 1 196 9 is_stmt 1 view .LVU104
 196:tmk_core/common/report.c ****         if (keyboard_report->keys[i] == code) {
 415              		.loc 1 196 12 is_stmt 0 view .LVU105
 416 0008 1C78     		ldrb	r4, [r3]
 417 000a 8C42     		cmp	r4, r1
 418 000c 00D1     		bne	.L49
 419              		.loc 1 197 13 is_stmt 1 view .LVU106
 420              		.loc 1 197 38 is_stmt 0 view .LVU107
 421 000e 1A70     		strb	r2, [r3]
 422              	.L49:
 423              	.LVL37:
 424              		.loc 1 197 38 view .LVU108
 425 0010 0133     		adds	r3, r3, #1
 426              	.LVL38:
 195:tmk_core/common/report.c ****         if (keyboard_report->keys[i] == code) {
 427              		.loc 1 195 5 discriminator 2 view .LVU109
 428 0012 8342     		cmp	r3, r0
 429 0014 F8D1     		bne	.L50
 430              	.LBE7:
 198:tmk_core/common/report.c ****         }
 199:tmk_core/common/report.c ****     }
 200:tmk_core/common/report.c **** #endif
 201:tmk_core/common/report.c **** }
 431              		.loc 1 201 1 view .LVU110
 432              		@ sp needed
 433 0016 10BD     		pop	{r4, pc}
 434              		.cfi_endproc
 435              	.LFE192:
 437              		.section	.text.add_key_bit,"ax",%progbits
 438              		.align	1
 439              		.global	add_key_bit
 440              		.syntax unified
 441              		.code	16
 442              		.thumb_func
 443              		.fpu softvfp
 445              	add_key_bit:
 446              	.LVL39:
 447              	.LFB193:
 202:tmk_core/common/report.c **** 
 203:tmk_core/common/report.c **** #ifdef NKRO_ENABLE
 204:tmk_core/common/report.c **** /** \brief add key bit
 205:tmk_core/common/report.c ****  *
 206:tmk_core/common/report.c ****  * FIXME: Needs doc
 207:tmk_core/common/report.c ****  */
 208:tmk_core/common/report.c **** void add_key_bit(report_keyboard_t* keyboard_report, uint8_t code) {
 448              		.loc 1 208 68 is_stmt 1 view -0
 449              		.cfi_startproc
 450              		@ args = 0, pretend = 0, frame = 0
 451              		@ frame_needed = 0, uses_anonymous_args = 0
 209:tmk_core/common/report.c ****     if ((code >> 3) < KEYBOARD_REPORT_BITS) {
 452              		.loc 1 209 5 view .LVU112
 208:tmk_core/common/report.c ****     if ((code >> 3) < KEYBOARD_REPORT_BITS) {
 453              		.loc 1 208 68 is_stmt 0 view .LVU113
 454 0000 10B5     		push	{r4, lr}
 455              		.cfi_def_cfa_offset 8
 456              		.cfi_offset 4, -8
 457              		.cfi_offset 14, -4
 458              		.loc 1 209 21 view .LVU114
 459 0002 CB08     		lsrs	r3, r1, #3
 460              		.loc 1 209 8 view .LVU115
 461 0004 1D2B     		cmp	r3, #29
 462 0006 08D8     		bhi	.L53
 210:tmk_core/common/report.c ****         keyboard_report->nkro.bits[code >> 3] |= 1 << (code & 7);
 463              		.loc 1 210 9 is_stmt 1 view .LVU116
 464              		.loc 1 210 47 is_stmt 0 view .LVU117
 465 0008 C018     		adds	r0, r0, r3
 466              	.LVL40:
 467              		.loc 1 210 61 view .LVU118
 468 000a 0723     		movs	r3, #7
 469 000c 1940     		ands	r1, r3
 470              	.LVL41:
 471              		.loc 1 210 52 view .LVU119
 472 000e 063B     		subs	r3, r3, #6
 473 0010 8B40     		lsls	r3, r3, r1
 474              		.loc 1 210 47 view .LVU120
 475 0012 8278     		ldrb	r2, [r0, #2]
 476 0014 1343     		orrs	r3, r2
 477 0016 8370     		strb	r3, [r0, #2]
 478              	.L52:
 211:tmk_core/common/report.c ****     } else {
 212:tmk_core/common/report.c ****         dprintf("add_key_bit: can't add: %02X\n", code);
 213:tmk_core/common/report.c ****     }
 214:tmk_core/common/report.c **** }
 479              		.loc 1 214 1 view .LVU121
 480              		@ sp needed
 481 0018 10BD     		pop	{r4, pc}
 482              	.LVL42:
 483              	.L53:
 484              	.LBB10:
 485              	.LBI10:
 208:tmk_core/common/report.c ****     if ((code >> 3) < KEYBOARD_REPORT_BITS) {
 486              		.loc 1 208 6 is_stmt 1 view .LVU122
 487              	.LBB11:
 212:tmk_core/common/report.c ****     }
 488              		.loc 1 212 9 view .LVU123
 212:tmk_core/common/report.c ****     }
 489              		.loc 1 212 9 view .LVU124
 490 001a 044B     		ldr	r3, .L58
 491 001c 1B78     		ldrb	r3, [r3]
 492 001e DB07     		lsls	r3, r3, #31
 493 0020 FAD5     		bpl	.L52
 212:tmk_core/common/report.c ****     }
 494              		.loc 1 212 9 view .LVU125
 495 0022 0348     		ldr	r0, .L58+4
 496              	.LVL43:
 212:tmk_core/common/report.c ****     }
 497              		.loc 1 212 9 is_stmt 0 view .LVU126
 498 0024 FFF7FEFF 		bl	tfp_printf
 499              	.LVL44:
 212:tmk_core/common/report.c ****     }
 500              		.loc 1 212 9 view .LVU127
 501              	.LBE11:
 502              	.LBE10:
 503              		.loc 1 214 1 view .LVU128
 504 0028 F6E7     		b	.L52
 505              	.L59:
 506 002a C046     		.align	2
 507              	.L58:
 508 002c 00000000 		.word	debug_config
 509 0030 00000000 		.word	.LC7
 510              		.cfi_endproc
 511              	.LFE193:
 513              		.section	.text.del_key_bit,"ax",%progbits
 514              		.align	1
 515              		.global	del_key_bit
 516              		.syntax unified
 517              		.code	16
 518              		.thumb_func
 519              		.fpu softvfp
 521              	del_key_bit:
 522              	.LVL45:
 523              	.LFB194:
 215:tmk_core/common/report.c **** 
 216:tmk_core/common/report.c **** /** \brief del key bit
 217:tmk_core/common/report.c ****  *
 218:tmk_core/common/report.c ****  * FIXME: Needs doc
 219:tmk_core/common/report.c ****  */
 220:tmk_core/common/report.c **** void del_key_bit(report_keyboard_t* keyboard_report, uint8_t code) {
 524              		.loc 1 220 68 is_stmt 1 view -0
 525              		.cfi_startproc
 526              		@ args = 0, pretend = 0, frame = 0
 527              		@ frame_needed = 0, uses_anonymous_args = 0
 221:tmk_core/common/report.c ****     if ((code >> 3) < KEYBOARD_REPORT_BITS) {
 528              		.loc 1 221 5 view .LVU130
 220:tmk_core/common/report.c ****     if ((code >> 3) < KEYBOARD_REPORT_BITS) {
 529              		.loc 1 220 68 is_stmt 0 view .LVU131
 530 0000 10B5     		push	{r4, lr}
 531              		.cfi_def_cfa_offset 8
 532              		.cfi_offset 4, -8
 533              		.cfi_offset 14, -4
 534              		.loc 1 221 21 view .LVU132
 535 0002 CB08     		lsrs	r3, r1, #3
 536              		.loc 1 221 8 view .LVU133
 537 0004 1D2B     		cmp	r3, #29
 538 0006 08D8     		bhi	.L61
 222:tmk_core/common/report.c ****         keyboard_report->nkro.bits[code >> 3] &= ~(1 << (code & 7));
 539              		.loc 1 222 9 is_stmt 1 view .LVU134
 540              		.loc 1 222 47 is_stmt 0 view .LVU135
 541 0008 C018     		adds	r0, r0, r3
 542              	.LVL46:
 543              		.loc 1 222 63 view .LVU136
 544 000a 0723     		movs	r3, #7
 545              		.loc 1 222 54 view .LVU137
 546 000c 0122     		movs	r2, #1
 547              		.loc 1 222 63 view .LVU138
 548 000e 1940     		ands	r1, r3
 549              	.LVL47:
 550              		.loc 1 222 54 view .LVU139
 551 0010 8A40     		lsls	r2, r2, r1
 552              		.loc 1 222 47 view .LVU140
 553 0012 8378     		ldrb	r3, [r0, #2]
 554 0014 9343     		bics	r3, r2
 555 0016 8370     		strb	r3, [r0, #2]
 556              	.L60:
 223:tmk_core/common/report.c ****     } else {
 224:tmk_core/common/report.c ****         dprintf("del_key_bit: can't del: %02X\n", code);
 225:tmk_core/common/report.c ****     }
 226:tmk_core/common/report.c **** }
 557              		.loc 1 226 1 view .LVU141
 558              		@ sp needed
 559 0018 10BD     		pop	{r4, pc}
 560              	.LVL48:
 561              	.L61:
 562              	.LBB14:
 563              	.LBI14:
 220:tmk_core/common/report.c ****     if ((code >> 3) < KEYBOARD_REPORT_BITS) {
 564              		.loc 1 220 6 is_stmt 1 view .LVU142
 565              	.LBB15:
 224:tmk_core/common/report.c ****     }
 566              		.loc 1 224 9 view .LVU143
 224:tmk_core/common/report.c ****     }
 567              		.loc 1 224 9 view .LVU144
 568 001a 044B     		ldr	r3, .L66
 569 001c 1B78     		ldrb	r3, [r3]
 570 001e DB07     		lsls	r3, r3, #31
 571 0020 FAD5     		bpl	.L60
 224:tmk_core/common/report.c ****     }
 572              		.loc 1 224 9 view .LVU145
 573 0022 0348     		ldr	r0, .L66+4
 574              	.LVL49:
 224:tmk_core/common/report.c ****     }
 575              		.loc 1 224 9 is_stmt 0 view .LVU146
 576 0024 FFF7FEFF 		bl	tfp_printf
 577              	.LVL50:
 224:tmk_core/common/report.c ****     }
 578              		.loc 1 224 9 view .LVU147
 579              	.LBE15:
 580              	.LBE14:
 581              		.loc 1 226 1 view .LVU148
 582 0028 F6E7     		b	.L60
 583              	.L67:
 584 002a C046     		.align	2
 585              	.L66:
 586 002c 00000000 		.word	debug_config
 587 0030 00000000 		.word	.LC10
 588              		.cfi_endproc
 589              	.LFE194:
 591              		.section	.text.add_key_to_report,"ax",%progbits
 592              		.align	1
 593              		.global	add_key_to_report
 594              		.syntax unified
 595              		.code	16
 596              		.thumb_func
 597              		.fpu softvfp
 599              	add_key_to_report:
 600              	.LVL51:
 601              	.LFB195:
 227:tmk_core/common/report.c **** #endif
 228:tmk_core/common/report.c **** 
 229:tmk_core/common/report.c **** /** \brief add key to report
 230:tmk_core/common/report.c ****  *
 231:tmk_core/common/report.c ****  * FIXME: Needs doc
 232:tmk_core/common/report.c ****  */
 233:tmk_core/common/report.c **** void add_key_to_report(report_keyboard_t* keyboard_report, uint8_t key) {
 602              		.loc 1 233 73 is_stmt 1 view -0
 603              		.cfi_startproc
 604              		@ args = 0, pretend = 0, frame = 0
 605              		@ frame_needed = 0, uses_anonymous_args = 0
 234:tmk_core/common/report.c **** #ifdef NKRO_ENABLE
 235:tmk_core/common/report.c ****     if (keyboard_protocol && keymap_config.nkro) {
 606              		.loc 1 235 5 view .LVU150
 233:tmk_core/common/report.c **** #ifdef NKRO_ENABLE
 607              		.loc 1 233 73 is_stmt 0 view .LVU151
 608 0000 10B5     		push	{r4, lr}
 609              		.cfi_def_cfa_offset 8
 610              		.cfi_offset 4, -8
 611              		.cfi_offset 14, -4
 612              		.loc 1 235 9 view .LVU152
 613 0002 074B     		ldr	r3, .L74
 614              		.loc 1 235 8 view .LVU153
 615 0004 1B78     		ldrb	r3, [r3]
 616 0006 002B     		cmp	r3, #0
 617 0008 06D0     		beq	.L69
 618              		.loc 1 235 27 discriminator 1 view .LVU154
 619 000a 064B     		ldr	r3, .L74+4
 620 000c 1B78     		ldrb	r3, [r3]
 621 000e 7F2B     		cmp	r3, #127
 622 0010 02D9     		bls	.L69
 236:tmk_core/common/report.c ****         add_key_bit(keyboard_report, key);
 623              		.loc 1 236 9 is_stmt 1 view .LVU155
 624 0012 FFF7FEFF 		bl	add_key_bit
 625              	.LVL52:
 237:tmk_core/common/report.c ****         return;
 626              		.loc 1 237 9 view .LVU156
 627              	.L68:
 238:tmk_core/common/report.c ****     }
 239:tmk_core/common/report.c **** #endif
 240:tmk_core/common/report.c ****     add_key_byte(keyboard_report, key);
 241:tmk_core/common/report.c **** }
 628              		.loc 1 241 1 is_stmt 0 view .LVU157
 629              		@ sp needed
 630 0016 10BD     		pop	{r4, pc}
 631              	.LVL53:
 632              	.L69:
 240:tmk_core/common/report.c **** }
 633              		.loc 1 240 5 is_stmt 1 view .LVU158
 634 0018 FFF7FEFF 		bl	add_key_byte
 635              	.LVL54:
 240:tmk_core/common/report.c **** }
 636              		.loc 1 240 5 is_stmt 0 view .LVU159
 637 001c FBE7     		b	.L68
 638              	.L75:
 639 001e C046     		.align	2
 640              	.L74:
 641 0020 00000000 		.word	keyboard_protocol
 642 0024 00000000 		.word	keymap_config
 643              		.cfi_endproc
 644              	.LFE195:
 646              		.section	.text.del_key_from_report,"ax",%progbits
 647              		.align	1
 648              		.global	del_key_from_report
 649              		.syntax unified
 650              		.code	16
 651              		.thumb_func
 652              		.fpu softvfp
 654              	del_key_from_report:
 655              	.LVL55:
 656              	.LFB196:
 242:tmk_core/common/report.c **** 
 243:tmk_core/common/report.c **** /** \brief del key from report
 244:tmk_core/common/report.c ****  *
 245:tmk_core/common/report.c ****  * FIXME: Needs doc
 246:tmk_core/common/report.c ****  */
 247:tmk_core/common/report.c **** void del_key_from_report(report_keyboard_t* keyboard_report, uint8_t key) {
 657              		.loc 1 247 75 is_stmt 1 view -0
 658              		.cfi_startproc
 659              		@ args = 0, pretend = 0, frame = 0
 660              		@ frame_needed = 0, uses_anonymous_args = 0
 248:tmk_core/common/report.c **** #ifdef NKRO_ENABLE
 249:tmk_core/common/report.c ****     if (keyboard_protocol && keymap_config.nkro) {
 661              		.loc 1 249 5 view .LVU161
 247:tmk_core/common/report.c **** #ifdef NKRO_ENABLE
 662              		.loc 1 247 75 is_stmt 0 view .LVU162
 663 0000 10B5     		push	{r4, lr}
 664              		.cfi_def_cfa_offset 8
 665              		.cfi_offset 4, -8
 666              		.cfi_offset 14, -4
 667              		.loc 1 249 9 view .LVU163
 668 0002 074B     		ldr	r3, .L82
 669              		.loc 1 249 8 view .LVU164
 670 0004 1B78     		ldrb	r3, [r3]
 671 0006 002B     		cmp	r3, #0
 672 0008 06D0     		beq	.L77
 673              		.loc 1 249 27 discriminator 1 view .LVU165
 674 000a 064B     		ldr	r3, .L82+4
 675 000c 1B78     		ldrb	r3, [r3]
 676 000e 7F2B     		cmp	r3, #127
 677 0010 02D9     		bls	.L77
 250:tmk_core/common/report.c ****         del_key_bit(keyboard_report, key);
 678              		.loc 1 250 9 is_stmt 1 view .LVU166
 679 0012 FFF7FEFF 		bl	del_key_bit
 680              	.LVL56:
 251:tmk_core/common/report.c ****         return;
 681              		.loc 1 251 9 view .LVU167
 682              	.L76:
 252:tmk_core/common/report.c ****     }
 253:tmk_core/common/report.c **** #endif
 254:tmk_core/common/report.c ****     del_key_byte(keyboard_report, key);
 255:tmk_core/common/report.c **** }
 683              		.loc 1 255 1 is_stmt 0 view .LVU168
 684              		@ sp needed
 685 0016 10BD     		pop	{r4, pc}
 686              	.LVL57:
 687              	.L77:
 254:tmk_core/common/report.c **** }
 688              		.loc 1 254 5 is_stmt 1 view .LVU169
 689 0018 FFF7FEFF 		bl	del_key_byte
 690              	.LVL58:
 254:tmk_core/common/report.c **** }
 691              		.loc 1 254 5 is_stmt 0 view .LVU170
 692 001c FBE7     		b	.L76
 693              	.L83:
 694 001e C046     		.align	2
 695              	.L82:
 696 0020 00000000 		.word	keyboard_protocol
 697 0024 00000000 		.word	keymap_config
 698              		.cfi_endproc
 699              	.LFE196:
 701              		.section	.text.clear_keys_from_report,"ax",%progbits
 702              		.align	1
 703              		.global	clear_keys_from_report
 704              		.syntax unified
 705              		.code	16
 706              		.thumb_func
 707              		.fpu softvfp
 709              	clear_keys_from_report:
 710              	.LVL59:
 711              	.LFB197:
 256:tmk_core/common/report.c **** 
 257:tmk_core/common/report.c **** /** \brief clear key from report
 258:tmk_core/common/report.c ****  *
 259:tmk_core/common/report.c ****  * FIXME: Needs doc
 260:tmk_core/common/report.c ****  */
 261:tmk_core/common/report.c **** void clear_keys_from_report(report_keyboard_t* keyboard_report) {
 712              		.loc 1 261 65 is_stmt 1 view -0
 713              		.cfi_startproc
 714              		@ args = 0, pretend = 0, frame = 0
 715              		@ frame_needed = 0, uses_anonymous_args = 0
 262:tmk_core/common/report.c ****     // not clear mods
 263:tmk_core/common/report.c **** #ifdef NKRO_ENABLE
 264:tmk_core/common/report.c ****     if (keyboard_protocol && keymap_config.nkro) {
 716              		.loc 1 264 5 view .LVU172
 261:tmk_core/common/report.c ****     // not clear mods
 717              		.loc 1 261 65 is_stmt 0 view .LVU173
 718 0000 10B5     		push	{r4, lr}
 719              		.cfi_def_cfa_offset 8
 720              		.cfi_offset 4, -8
 721              		.cfi_offset 14, -4
 722              		.loc 1 264 9 view .LVU174
 723 0002 074B     		ldr	r3, .L91
 724 0004 0230     		adds	r0, r0, #2
 725              	.LVL60:
 726              		.loc 1 264 8 view .LVU175
 727 0006 1B78     		ldrb	r3, [r3]
 728 0008 002B     		cmp	r3, #0
 729 000a 04D0     		beq	.L85
 730              		.loc 1 264 27 discriminator 1 view .LVU176
 731 000c 054B     		ldr	r3, .L91+4
 265:tmk_core/common/report.c ****         memset(keyboard_report->nkro.bits, 0, sizeof(keyboard_report->nkro.bits));
 732              		.loc 1 265 9 discriminator 1 view .LVU177
 733 000e 1E22     		movs	r2, #30
 264:tmk_core/common/report.c ****         memset(keyboard_report->nkro.bits, 0, sizeof(keyboard_report->nkro.bits));
 734              		.loc 1 264 27 discriminator 1 view .LVU178
 735 0010 1B78     		ldrb	r3, [r3]
 736 0012 7F2B     		cmp	r3, #127
 737 0014 00D8     		bhi	.L90
 738              	.L85:
 266:tmk_core/common/report.c ****         return;
 267:tmk_core/common/report.c ****     }
 268:tmk_core/common/report.c **** #endif
 269:tmk_core/common/report.c ****     memset(keyboard_report->keys, 0, sizeof(keyboard_report->keys));
 739              		.loc 1 269 5 is_stmt 1 view .LVU179
 740 0016 0622     		movs	r2, #6
 741              	.L90:
 742 0018 0021     		movs	r1, #0
 743 001a FFF7FEFF 		bl	memset
 744              	.LVL61:
 270:tmk_core/common/report.c **** }
 745              		.loc 1 270 1 is_stmt 0 view .LVU180
 746              		@ sp needed
 747 001e 10BD     		pop	{r4, pc}
 748              	.L92:
 749              		.align	2
 750              	.L91:
 751 0020 00000000 		.word	keyboard_protocol
 752 0024 00000000 		.word	keymap_config
 753              		.cfi_endproc
 754              	.LFE197:
 756              		.section	.rodata.add_key_bit.str1.1,"aMS",%progbits,1
 757              	.LC7:
 758 0000 6164645F 		.ascii	"add_key_bit: can't add: %02X\012\000"
 758      6B65795F 
 758      6269743A 
 758      2063616E 
 758      27742061 
 759              		.section	.rodata.del_key_bit.str1.1,"aMS",%progbits,1
 760              	.LC10:
 761 0000 64656C5F 		.ascii	"del_key_bit: can't del: %02X\012\000"
 761      6B65795F 
 761      6269743A 
 761      2063616E 
 761      27742064 
 762              		.text
 763              	.Letext0:
 764              		.file 2 "c:\\msys64\\home\\kyleo\\qmk_utils\\gcc-arm-none-eabi\\arm-none-eabi\\include\\machine\\_
 765              		.file 3 "c:\\msys64\\home\\kyleo\\qmk_utils\\gcc-arm-none-eabi\\arm-none-eabi\\include\\sys\\_stdi
 766              		.file 4 "c:\\msys64\\home\\kyleo\\qmk_utils\\gcc-arm-none-eabi\\arm-none-eabi\\include\\stdint.h"
 767              		.file 5 "c:\\msys64\\home\\kyleo\\qmk_utils\\gcc-arm-none-eabi\\lib\\gcc\\arm-none-eabi\\8.3.1\\in
 768              		.file 6 "./lib/chibios/os/common/ports/ARMCMx/compilers/GCC/chtypes.h"
 769              		.file 7 "./lib/chibios/os/rt/include/chsystypes.h"
 770              		.file 8 "./lib/chibios/os/rt/include/chschd.h"
 771              		.file 9 "./lib/chibios/os/rt/include/chtime.h"
 772              		.file 10 "./lib/chibios/os/common/ext/ST/STM32F0xx/system_stm32f0xx.h"
 773              		.file 11 "./lib/chibios/os/common/ext/ST/STM32F0xx/stm32f072xb.h"
 774              		.file 12 "./lib/chibios/os/common/ports/ARMCMx/chcore.h"
 775              		.file 13 "./lib/chibios/os/common/ports/ARMCMx/chcore_v6m.h"
 776              		.file 14 "./lib/chibios/os/hal/ports/STM32/LLD/TIMv1/stm32_tim.h"
 777              		.file 15 "./lib/chibios/os/rt/include/chsem.h"
 778              		.file 16 "./lib/chibios/os/rt/include/chmtx.h"
 779              		.file 17 "./lib/chibios/os/rt/include/chsys.h"
 780              		.file 18 "./lib/chibios/os/rt/include/chregistry.h"
 781              		.file 19 "./lib/chibios/os/oslib/include/chmemcore.h"
 782              		.file 20 "./lib/chibios/os/hal/ports/STM32/LLD/DMAv1/stm32_dma.h"
 783              		.file 21 "./lib/chibios/os/hal/ports/STM32/LLD/GPIOv2/stm32_gpio.h"
 784              		.file 22 "./lib/chibios/os/hal/ports/STM32/LLD/GPIOv2/hal_pal_lld.h"
 785              		.file 23 "./lib/chibios/os/hal/include/hal_i2c.h"
 786              		.file 24 "./lib/chibios/os/hal/ports/STM32/LLD/I2Cv2/hal_i2c_lld.h"
 787              		.file 25 "./lib/chibios/os/hal/include/hal_pwm.h"
 788              		.file 26 "./lib/chibios/os/hal/ports/STM32/LLD/TIMv1/hal_pwm_lld.h"
 789              		.file 27 "./lib/chibios/os/hal/include/hal_spi.h"
 790              		.file 28 "./lib/chibios/os/hal/ports/STM32/LLD/SPIv2/hal_spi_lld.h"
 791              		.file 29 "./lib/chibios/os/hal/include/hal_usb.h"
 792              		.file 30 "./lib/chibios/os/hal/ports/STM32/LLD/USBv1/hal_usb_lld.h"
 793              		.file 31 "tmk_core/common/report.h"
 794              		.file 32 "tmk_core/common/host.h"
 795              		.file 33 "quantum/keycode_config.h"
 796              		.file 34 "tmk_core/common/debug.h"
 797              		.file 35 "c:\\msys64\\home\\kyleo\\qmk_utils\\gcc-arm-none-eabi\\arm-none-eabi\\include\\sys\\_typ
 798              		.file 36 "c:\\msys64\\home\\kyleo\\qmk_utils\\gcc-arm-none-eabi\\arm-none-eabi\\include\\sys\\reen
 799              		.file 37 "c:\\msys64\\home\\kyleo\\qmk_utils\\gcc-arm-none-eabi\\arm-none-eabi\\include\\sys\\lock
 800              		.file 38 "tmk_core/common/util.h"
 801              		.file 39 "tmk_core/common/chibios/printf.h"
 802              		.file 40 "tmk_core/common/keycode.h"
 803              		.file 41 "<built-in>"
DEFINED SYMBOLS
                            *ABS*:00000000 report.c
C:\Users\kyleo\AppData\Local\Temp\ccE7F7eY.s:16     .text.has_anykey:00000000 $t
C:\Users\kyleo\AppData\Local\Temp\ccE7F7eY.s:24     .text.has_anykey:00000000 has_anykey
C:\Users\kyleo\AppData\Local\Temp\ccE7F7eY.s:93     .text.has_anykey:00000030 $d
C:\Users\kyleo\AppData\Local\Temp\ccE7F7eY.s:99     .text.get_first_key:00000000 $t
C:\Users\kyleo\AppData\Local\Temp\ccE7F7eY.s:106    .text.get_first_key:00000000 get_first_key
C:\Users\kyleo\AppData\Local\Temp\ccE7F7eY.s:189    .text.get_first_key:0000003c $d
C:\Users\kyleo\AppData\Local\Temp\ccE7F7eY.s:195    .text.is_key_pressed:00000000 $t
C:\Users\kyleo\AppData\Local\Temp\ccE7F7eY.s:202    .text.is_key_pressed:00000000 is_key_pressed
C:\Users\kyleo\AppData\Local\Temp\ccE7F7eY.s:296    .text.is_key_pressed:00000050 $d
C:\Users\kyleo\AppData\Local\Temp\ccE7F7eY.s:303    .text.add_key_byte:00000000 $t
C:\Users\kyleo\AppData\Local\Temp\ccE7F7eY.s:310    .text.add_key_byte:00000000 add_key_byte
C:\Users\kyleo\AppData\Local\Temp\ccE7F7eY.s:384    .text.del_key_byte:00000000 $t
C:\Users\kyleo\AppData\Local\Temp\ccE7F7eY.s:391    .text.del_key_byte:00000000 del_key_byte
C:\Users\kyleo\AppData\Local\Temp\ccE7F7eY.s:438    .text.add_key_bit:00000000 $t
C:\Users\kyleo\AppData\Local\Temp\ccE7F7eY.s:445    .text.add_key_bit:00000000 add_key_bit
C:\Users\kyleo\AppData\Local\Temp\ccE7F7eY.s:508    .text.add_key_bit:0000002c $d
C:\Users\kyleo\AppData\Local\Temp\ccE7F7eY.s:514    .text.del_key_bit:00000000 $t
C:\Users\kyleo\AppData\Local\Temp\ccE7F7eY.s:521    .text.del_key_bit:00000000 del_key_bit
C:\Users\kyleo\AppData\Local\Temp\ccE7F7eY.s:586    .text.del_key_bit:0000002c $d
C:\Users\kyleo\AppData\Local\Temp\ccE7F7eY.s:592    .text.add_key_to_report:00000000 $t
C:\Users\kyleo\AppData\Local\Temp\ccE7F7eY.s:599    .text.add_key_to_report:00000000 add_key_to_report
C:\Users\kyleo\AppData\Local\Temp\ccE7F7eY.s:641    .text.add_key_to_report:00000020 $d
C:\Users\kyleo\AppData\Local\Temp\ccE7F7eY.s:647    .text.del_key_from_report:00000000 $t
C:\Users\kyleo\AppData\Local\Temp\ccE7F7eY.s:654    .text.del_key_from_report:00000000 del_key_from_report
C:\Users\kyleo\AppData\Local\Temp\ccE7F7eY.s:696    .text.del_key_from_report:00000020 $d
C:\Users\kyleo\AppData\Local\Temp\ccE7F7eY.s:702    .text.clear_keys_from_report:00000000 $t
C:\Users\kyleo\AppData\Local\Temp\ccE7F7eY.s:709    .text.clear_keys_from_report:00000000 clear_keys_from_report
C:\Users\kyleo\AppData\Local\Temp\ccE7F7eY.s:751    .text.clear_keys_from_report:00000020 $d

UNDEFINED SYMBOLS
keyboard_protocol
keymap_config
biton
tfp_printf
debug_config
memset
